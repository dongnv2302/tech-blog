---
title: "なぜ注文を出さない実運用モードが必要なのか"
date: 2025-12-30
tags: ["SystemDesign", "TradingBot", "RiskManagement", "Operation"]
toc: true
---

## はじめに

自動売買システムを作ると、  
多くの場合「いつ実運用に切り替えるか」という判断に悩みます。

バックテストでは問題なく見える。  
ロジックも一通り完成している。

しかし、そのまま資金を入れて動かすのは、  
**システムとして非常に危険**です。

本記事では、  
**注文を出さずに実運用と同じ挙動を観測するモード**  
（以下、観測モード）がなぜ必要なのかを整理します。

本記事では、具体的なコードの解説ではなく、  
運用設計の考え方に焦点を当てます。

---

## 観測モードとは何か

ここでいう観測モードは、  
デモや簡易テストではなく、  
実運用を前提とした運用フェーズの一部です。

観測モードとは、以下のような運用形態です。

- 実際の市場データを使う
- 売買ロジック・リスクロジックをすべて動かす
- しかし **注文だけは出さない**

バックテストやシミュレーションとは異なり、  
**リアルタイムの市場でシステム全体を動かす**点が特徴です。

実装上は、  
「注文を送るかどうか」だけを切り替え、  
それ以外の処理はすべて本番と同じように動かします。

```python
# 観測モード（test_mode）
# 実際の価格でロジック・リスク管理をすべて実行するが、
# 注文（create_order）は送らない
if test_mode:
    pass
```

## なぜバックテストでは不十分なのか

バックテストでは、以下の前提が暗黙に置かれます。

- 約定は必ず成立する
- スリッページは理想的
- API エラーは存在しない

しかし、実運用では、

- 約定しないケース
- 遅延やタイムアウト
- WebSocket の瞬断

が **日常的に発生**します。

観測モードは、  
この **「理想と現実の差」** を埋めるために存在します。

---

## 観測モードで初めて分かること

### 1. ロジックは本当に意味を持つか

ロジックが正しくても、

- 利益がすぐに消える
- 最大含み益が小さい
- 含み損が深くなる

といった挙動は、  
**リアルタイムでしか確認できません**。

観測モードでは、

- 最大利益
- 最大逆行
- BE に到達するまでの時間

を **資金を使わずに安全に記録**できます。

---

### 2. Break-Even は本当に機能するか

多くのロジックは、

> 一定利益に達したら BE に移動する

という前提で設計されます。

しかし実際には、

- BE に到達しないまま反転する
- 到達までに時間がかかりすぎる

ケースが頻発します。

観測モードでは、  
BE の判定ロジック自体も **本番と同じ条件** で評価されます。

```python
# 観測モードでも BE 条件は評価される
if not be_activated and profit_pct >= BE_PROFIT_PCT:
    stop_price = snap_to_tick(entry_price, tick, mode="down")
    be_activated = True
```

### 3. 時間制御の妥当性

実運用では、

- いつまでもポジションを持ち続ける
- 動かない相場で資金を拘束する

こと自体がリスクになります。

観測モードでは、  
「一定時間動かなければ撤退する」という  
**時間ベースの判断** も検証できます。

```python
# 一定時間内に BE に到達しなければ強制終了
if elapsed >= BE_TIMEOUT_SEC and profit_pct < BE_PROFIT_PCT:
    close_position_market(symbol, side)
```

## 注文を出さないことの本当の価値

観測モードの価値は、  
「損をしないこと」ではありません。

本当の価値は、

- ロジックの幻想を壊す
- 運用上の弱点をあぶり出す
- 本番で起きる事故を事前に経験する

点にあります。

資金を使わずに、  
**実運用で起きる失敗を先に経験できる**  
それが観測モードです。

---

## 観測モードを経ずに実運用するとどうなるか

観測モードを省略すると、

- 想定外の挙動に耐えられない
- ロジック修正が常に本番依存になる
- なぜ負けたのかが分からない

状態に陥ります。

これはロジックの問題ではなく、  
**運用設計の問題**です。

---

## まとめ

- 観測モードはテストではない
- 実運用の一部である
- ロジック・リスク・時間制御を検証するために存在する

注文を出さないからといって、  
価値が低いわけではありません。

むしろ、  
**長期運用を前提とするシステムほど、  
観測モードの重要性は高くなります。**

次回は、  
実運用で最初に直面する壁である  
**Binance Futuresにおける Notional 管理の落とし穴**について整理します。